<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Withdraw from Contract</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.6.0/dist/web3.min.js"></script>
</head>
<body>
    <h1>Withdraw from Contract</h1>

    <label for="withdrawAmount">Amount to withdraw (in Wei):</label>
    <input type="number" id="withdrawAmount" placeholder="Amount in Wei" />

    <button onclick="withdrawFunds()">Withdraw</button>

    <script>
        // Initialize Web3
        if (typeof window.ethereum !== 'undefined') {
            const web3 = new Web3(window.ethereum);
            window.ethereum.request({ method: 'eth_requestAccounts' });
        }

        // Set your contract's ABI and address
        const contractABI = [
            // ABI from the Remix compilation or ABI file
            {
                "inputs": [{"internalType": "uint256", "name": "_amount", "type": "uint256"}],
                "name": "withdraw",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "getAmount",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            }
        ];
        const contractAddress = "0xd8b934580fcE35a11B58C6D73aDeE468a2833fa8"; // Your contract address
        const contract = new web3.eth.Contract(contractABI, contractAddress);

        // Function to withdraw funds
        async function withdrawFunds() {
            const accounts = await web3.eth.getAccounts();
            const withdrawAmount = document.getElementById("withdrawAmount").value;

            if (!withdrawAmount || withdrawAmount <= 0) {
                alert("Please enter a valid amount.");
                return;
            }

            const weiAmount = web3.utils.toWei(withdrawAmount, 'ether'); // Convert from Ether to Wei

            try {
                await contract.methods.withdraw(weiAmount).send({ from: accounts[0] });
                alert("Withdrawal successful!");
            } catch (error) {
                console.error(error);
                alert("An error occurred during withdrawal.");
            }
        }
    </script>
</body>
</html>

